<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <?!= include('Stylesheet'); ?>
</head>

<body>
    <!-- 첫 번째 화면: 메인 검사 상황판 -->
    <div class="screen active" id="screen1">
        <!-- 상단 SNSB-C 헤더 -->
        <div class="top-header" onclick="openSettingsModal()">
            SNSB-C
        </div>

        <!-- 메인 컨테이너 -->
        <div class="main-container">
            <!-- 검사실 섹션 -->
            <div class="exam-rooms-section">
                <div class="exam-room" id="room-1">
                    <div class="room-title">1번 검사실</div>
                    <div class="room-current" id="room-1-current">-</div>
                    <div class="room-time" id="room-1-time">-</div>
                </div>
                <div class="exam-room" id="room-2">
                    <div class="room-title">2번 검사실</div>
                    <div class="room-current" id="room-2-current">-</div>
                    <div class="room-time" id="room-2-time">-</div>
                </div>
                <div class="exam-room" id="room-3">
                    <div class="room-title">3번 검사실</div>
                    <div class="room-current" id="room-3-current">-</div>
                    <div class="room-time" id="room-3-time">-</div>
                </div>
            </div>

            <!-- 다음 대상자 섹션 -->
            <div class="next-subject-section" onclick="toggleScreen()">
                <div id="next-subject-text">다음 대상자 없음</div>
            </div>

            <!-- 하단 검사 섹션 (JS-Controlled) -->
            <div class="test-stations-section">
                <div class="test-station" id="station-ecg">
                    <div class="station-title">심전도</div>
                    <div class="station-current">
                        <div class="current-name" id="ecg-current">-</div>
                        <div class="current-time" id="ecg-time">-</div>
                    </div>
                    <div class="next-info" id="next-info-ecg">
                        <span class="next-label">다음</span>
                        <span class="next-name" id="ecg-next-name">대상자 없음</span>
                    </div>
                </div>
                <div class="test-station" id="station-blood">
                    <div class="station-title">채혈/채뇨</div>
                    <div class="station-current">
                        <div class="current-name" id="blood-current">-</div>
                        <div class="current-time" id="blood-time">-</div>
                    </div>
                    <div class="next-info" id="next-info-blood">
                        <span class="next-label">다음</span>
                        <span class="next-name" id="blood-next-name">대상자 없음</span>
                    </div>
                </div>
                <div class="test-station" id="station-physical">
                    <div class="station-title">신체기능</div>
                    <div class="station-current">
                        <div class="current-name" id="physical-current">-</div>
                        <div class="current-time" id="physical-time">-</div>
                    </div>
                    <div class="next-info" id="next-info-physical">
                        <span class="next-label">다음</span>
                        <span class="next-name" id="physical-next-name">대상자 없음</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 두 번째 화면: 전체 표 화면 -->
    <div class="screen" id="screen2">
        <div class="table-container" id="tableContainer2">
            <!-- JS가 동적으로 테이블을 그립니다. -->
        </div>
    </div>



    <!-- 설정 모달 -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>알림 설정</h2>
                <span class="close" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>SNSB-C 검사실</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-snsbc" checked>
                            SNSB-C 알림음
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="tts-snsbc" checked>
                            SNSB-C TTS 호명
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>심전도</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-ecg" checked>
                            심전도 알림음
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="tts-ecg" checked>
                            심전도 TTS 호명
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>채혈/채뇨</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-blood" checked>
                            채혈/채뇨 알림음
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="tts-blood" checked>
                            채혈/채뇨 TTS 호명
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>신체기능</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-physical" checked>
                            신체기능 알림음
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="tts-physical" checked>
                            신체기능 TTS 호명
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>전체 설정</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-all-sounds" checked>
                            모든 알림음 활성화
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-all-tts" checked>
                            모든 TTS 호명 활성화
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveSettings()" class="save-btn">저장</button>
                <button onclick="resetSettings()" class="reset-btn">초기화</button>
                <button onclick="testSound()" class="test-btn">테스트</button>
            </div>
        </div>
    </div>

    <div id="player" style="position: absolute; top: -9999px; left: -9999px;"></div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <?!= include('JavaScript'); ?>
</body>

</html>